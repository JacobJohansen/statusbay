import makeStyles from '@material-ui/core/styles/makeStyles';
import React, { useEffect, useState } from 'react';
import PropTypes from 'prop-types';

const createClasses = () => Array.from(Array(13).keys()).reduce((res, current) => {
  res[`&.step-${current + 1}`] = {
    [`& .element:nth-of-type(-n+${current + 1})`]: {
      opacity: 1,
      transition: 'opacity 0.2s ease-in-out',
    },
  };
  return res;
}, {});

const useStyles = makeStyles((theme) => ({
  root: {
    '& .element': {
      opacity: 0,
      fill: theme.palette.type === 'dark' ? '#ffffff' : theme.palette.primary.main,
    },
    ...createClasses(),
  },
  background: {
    fill: theme.palette.type === 'dark' ? '#ffffff' : theme.palette.primary.main,
  },
}));
const LoaderSvg = ({ interval }) => {
  const [step, setStep] = useState(0);
  useEffect(() => {
    const intervalId = setInterval(() => {
      setStep((step + 1) % 14);
    }, interval);
    return () => clearInterval(intervalId);
  }, [step, interval]);
  const classes = useStyles({ step });
  return (
    <svg
      width="400px"
      height="400px"
      viewBox="0 0 400 400"
      version="1.1"
      className={`${classes.root} step-${step}`}
    >
      <g id="14" stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
        <g id="Group-2" transform="translate(84.000000, 39.000000)" fillRule="nonzero">
          <g id="noun_Lighthouse_202335">
            <g
              id="Group"
              transform="translate(74.000000, 73.000000)"
              className={classes.background}
            >
              <polygon
                id="Path"
                points="71.5544118 147.483766 8.33308824 174.512987 11.2566176 142.73539 69.7272059 117.897727"
              />
              <path
                d="M76.3051471,216.517857 C68.9963235,217.613636 61.6875,219.805195 55.8404412,224.188312 C48.5316176,229.667208 44.1463235,238.068182 36.8375,243.547078 C26.6051471,250.852273 13.0838235,250.121753 0.658823529,249.391234 L4.67867647,209.212662 L73.7470588,179.991883 L76.3051471,216.517857 Z"
                id="Path"
              />
              <path
                d="M69.7272059,57.2646104 L66.0727941,57.2646104 L66.0727941,32.4269481 L69.7272059,32.4269481 C72.2852941,32.4269481 73.7470588,29.8701299 72.2852941,27.6785714 L60.2257353,18.9123377 L49.9933824,3.93668831 C46.3389706,-1.17694805 38.6647059,-1.17694805 35.0102941,3.93668831 L24.4125,18.9123377 L12.3529412,27.6785714 C10.8911765,29.8701299 12.3529412,32.4269481 14.9110294,32.4269481 L18.5654412,32.4269481 L18.5654412,57.2646104 L14.9110294,57.2646104 C12.3529412,57.2646104 10.8911765,60.1866883 12.3529412,62.012987 L18.2,70.7792208 L14.5455882,108.035714 L67.1691176,85.7548701 L66.4382353,70.7792208 L72.2852941,62.012987 C73.7470588,59.8214286 72.2852941,57.2646104 69.7272059,57.2646104 Z M55.1095588,57.2646104 L29.5286765,57.2646104 L29.5286765,32.4269481 L55.1095588,32.4269481 L55.1095588,57.2646104 Z"
                id="Shape"
              />
            </g>
            <path
              d="M34.6792453,203 C33.5754717,203 32.8396226,202.632075 32.1037736,201.896226 C30.6320755,200.424528 30.6320755,198.216981 32.1037736,196.745283 L63.745283,165.103774 C65.2169811,163.632075 67.4245283,163.632075 68.8962264,165.103774 C70.3679245,166.575472 70.3679245,168.783019 68.8962264,170.254717 L37.254717,201.896226 C36.5188679,202.632075 35.7830189,203 34.6792453,203 Z"
              id="Path1"
              className="element"
            />
            <path
              d="M26.5004116,156 C25.0459161,156 23.5914205,155.282937 23.2277966,153.84881 C22.5005488,152.056152 23.5914205,149.904962 25.40954,149.187898 L49.0450928,140.224607 C50.8632123,139.507543 53.0449556,140.583138 53.7722034,142.375797 C54.4994512,144.168455 53.4085795,146.319645 51.59046,147.036708 L27.9549072,156 C27.5912833,156 27.2276594,156 26.5004116,156 Z"
              id="Path2"
              className="element"
            />
            <path
              d="M47.3829787,121 L3.61702128,121 C1.44680851,121 0,119.6 0,117.5 C0,115.4 1.44680851,114 3.61702128,114 L47.3829787,114 C49.5531915,114 51,115.4 51,117.5 C51,119.6 49.1914894,121 47.3829787,121 Z"
              id="Path3"
              className="element"
            />
            <path
              d="M53.4400596,93 C53.0755508,93 52.3465334,93 51.9820247,92.6454348 L26.1019056,81.6539144 C24.279362,80.944784 23.5503445,78.8173929 24.279362,77.0445671 C25.0083794,75.2717412 27.1954317,74.5626108 29.0179753,75.2717412 L54.8980944,86.2632616 C56.720638,86.972392 57.4496555,89.0997831 56.720638,90.8726089 C55.9916206,92.2908696 54.8980944,93 53.4400596,93 Z"
              id="Path4"
              className="element"
            />
            <path
              d="M66.3207547,71 C65.2169811,71 64.4811321,70.6285714 63.745283,69.8857143 L32.1037736,38.3142857 C30.6320755,36.8285714 30.6320755,34.6 32.1037736,33.1142857 C33.5754717,31.6285714 35.7830189,31.6285714 37.254717,33.1142857 L68.8962264,65.0571429 C70.3679245,66.5428571 70.3679245,68.7714286 68.8962264,70.2571429 C68.1603774,70.6285714 67.0566038,71 66.3207547,71 Z"
              id="Path5"
              className="element"
            />
            <path
              d="M90.007996,54 C88.5053306,54 87.0026653,53.2673686 86.626999,51.8021059 L77.2353408,27.9915868 C76.4840081,26.1600084 77.6110071,23.9621143 79.4893387,23.2294829 C81.3676704,22.4968516 83.6216684,23.5957986 84.373001,25.427377 L93.7646592,49.2378962 C94.5159919,51.0694746 93.3889929,53.2673686 91.5106613,54 C90.7593286,53.6336843 90.3836623,54 90.007996,54 Z"
              id="Path6"
              className="element"
            />
            <path
              d="M117.5,51 C115.4,51 114,49.5531915 114,47.3829787 L114,3.61702128 C114,1.44680851 115.4,0 117.5,0 C119.6,0 121,1.44680851 121,3.61702128 L121,47.3829787 C121,49.5531915 119.6,51 117.5,51 Z"
              id="Path7"
              className="element"
            />
            <path
              d="M142.992004,55 C142.616338,55 142.240671,55 141.489339,54.6262838 C139.611007,53.8788513 138.484008,51.6365538 139.235341,49.7679726 L148.626999,25.4764166 C149.378332,23.6078353 151.63233,22.4866866 153.510661,23.2341191 C155.388993,23.9815516 156.515992,26.2238491 155.764659,28.0924303 L146.748667,52.3839863 C145.997335,53.8788513 144.494669,55 142.992004,55 Z"
              id="Path8"
              className="element"
            />
            <path
              d="M166.679245,71 C165.575472,71 164.839623,70.6320755 164.103774,69.8962264 C162.632075,68.4245283 162.632075,66.2169811 164.103774,64.745283 L195.745283,33.1037736 C197.216981,31.6320755 199.424528,31.6320755 200.896226,33.1037736 C202.367925,34.5754717 202.367925,36.7830189 200.896226,38.254717 L169.254717,69.8962264 C168.518868,70.6320755 167.783019,71 166.679245,71 Z"
              id="Path9"
              className="element"
            />
            <path
              d="M184.541958,94 C183.070199,94 181.59844,93.2829367 181.2305,91.84881 C180.494621,90.0561516 181.59844,87.9049616 183.438139,87.1878983 L206.986283,78.2246065 C208.825982,77.5075432 211.03362,78.5831382 211.7695,80.3757966 C212.505379,82.1684549 211.40156,84.3196449 209.561861,85.0367083 L186.013717,94 C185.277838,94 184.909898,94 184.541958,94 Z"
              id="Path10"
              className="element"
            />
            <path
              d="M229.382979,121 L185.617021,121 C183.446809,121 182,119.6 182,117.5 C182,115.4 183.446809,114 185.617021,114 L229.382979,114 C231.553191,114 233,115.4 233,117.5 C233,119.6 231.553191,121 229.382979,121 Z"
              id="Path11"
              className="element"
            />
            <path
              d="M205.400298,159 C205.031718,159 204.294558,159 203.925978,158.645435 L178.125382,147.653914 C176.282482,146.944784 175.545322,144.817393 176.282482,143.044567 C177.019642,141.271741 179.231122,140.562611 181.074022,141.271741 L206.874618,152.263262 C208.717518,152.972392 209.454678,155.099783 208.717518,156.872609 C208.348938,158.29087 206.874618,159 205.400298,159 Z"
              id="Path12"
              className="element"
            />
            <path
              d="M198.320755,203 C197.216981,203 196.481132,202.632075 195.745283,201.896226 L164.103774,170.254717 C162.632075,168.783019 162.632075,166.575472 164.103774,165.103774 C165.575472,163.632075 167.783019,163.632075 169.254717,165.103774 L200.896226,196.745283 C202.367925,198.216981 202.367925,200.424528 200.896226,201.896226 C200.160377,202.632075 199.056604,203 198.320755,203 Z"
              id="Path13"
              className="element"
            />
          </g>
        </g>
      </g>
    </svg>
  );
};

LoaderSvg.propTypes = {
  interval: PropTypes.number.isRequired,
};


export default LoaderSvg;
